{"version":3,"sources":["webpack:///./src/layouts/Login/index.vue?991a","webpack:///./src/vue/directives/countDown.js","webpack:///src/layouts/Login/index.vue","webpack:///./src/layouts/Login/index.vue?f6fe","webpack:///./src/layouts/Login/index.vue","webpack:///./src/layouts/Login/index.vue?65d5"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","staticClass","attrs","logo","_v","isLogin","model","value","callback","$$v","tabsActive","expression","ref","form","password","required","message","trigger","$set","slot","captcha","validator","validatePhone","directives","name","rawName","autoLogin","checkFieldValue","on","onSubmit","staticRenderFns","inserted","el","binding","vnode","event$","defaultText","innerText","then","res","timer","i","classList","remove","disabled","add","setTimeout","addEventListener","unbind","removeEventListener","components","component"],"mappings":"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","file":"js/login-legacy.5eff81dd.js","sourcesContent":["var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"fix-container\"},[_c('article',{staticClass:\"fix-article\"},[_c('LogoWrap',{attrs:{\"size\":\"large\",\"logo\":_vm.logo}},[_vm._v(\"ElementUI Demo\")]),_c('el-tabs',{staticClass:\"fix-tabs\",attrs:{\"before-leave\":function () { return !this$1.isLogin; }},model:{value:(_vm.tabsActive),callback:function ($$v) {_vm.tabsActive=$$v},expression:\"tabsActive\"}},[_c('el-tab-pane',{attrs:{\"label\":\"账户密码登录\",\"name\":\"password\"}},[_c('el-form',{ref:\"password\",attrs:{\"model\":_vm.form.password}},[_c('el-form-item',{attrs:{\"prop\":\"username\",\"rules\":{ required: true, message: '请输入用户名', trigger: 'change' }}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"admin\",\"clearable\":\"\"},model:{value:(_vm.form.password.username),callback:function ($$v) {_vm.$set(_vm.form.password, \"username\", $$v)},expression:\"form.password.username\"}},[_c('i',{staticClass:\"el-input__icon el-icon-icon-user\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"password\",\"rules\":{ required: true, message: '请输入密码', trigger: 'change' }}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"admin\",\"clearable\":\"\"},model:{value:(_vm.form.password.password),callback:function ($$v) {_vm.$set(_vm.form.password, \"password\", $$v)},expression:\"form.password.password\"}},[_c('i',{staticClass:\"el-input__icon el-icon-icon-lock\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"手机号登录\",\"name\":\"captcha\"}},[_c('el-form',{ref:\"captcha\",attrs:{\"model\":_vm.form.captcha}},[_c('el-form-item',{attrs:{\"prop\":\"phone\",\"rules\":{ validator: _vm.validatePhone, message: '请输入手机号', trigger: 'change' }}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"mobile number\",\"clearable\":\"\"},model:{value:(_vm.form.captcha.phone),callback:function ($$v) {_vm.$set(_vm.form.captcha, \"phone\", $$v)},expression:\"form.captcha.phone\"}},[_c('i',{staticClass:\"el-input__icon el-icon-icon-mobile\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"captcha\",\"rules\":{ required: true, message: '请输入验证码', trigger: 'change' }}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":16,\"xs\":14,\"sm\":16}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"captcha\",\"clearable\":\"\"},model:{value:(_vm.form.captcha.captcha),callback:function ($$v) {_vm.$set(_vm.form.captcha, \"captcha\", $$v)},expression:\"form.captcha.captcha\"}},[_c('i',{staticClass:\"el-input__icon el-icon-icon-mail\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-col',{attrs:{\"span\":8,\"xs\":10,\"sm\":8}},[_c('el-button',{directives:[{name:\"countDown\",rawName:\"v-countDown\",value:(_vm.sendCaptcha),expression:\"sendCaptcha\"}],staticClass:\"fix-button\",attrs:{\"plain\":\"\"}},[_vm._v(\"获取验证码\")])],1)],1)],1)],1)],1)],1),_c('el-form',[_c('el-form-item',{staticClass:\"fix-form-item\"},[_c('el-checkbox',{model:{value:(_vm.autoLogin),callback:function ($$v) {_vm.autoLogin=$$v},expression:\"autoLogin\"}},[_vm._v(\"自动登录\")]),_c('el-button',{attrs:{\"type\":\"text\"}},[_vm._v(\"忘记密码\")])],1),_c('el-form-item',[_c('el-button',{staticClass:\"fix-button\",attrs:{\"type\":\"primary\",\"loading\":_vm.isLogin,\"disabled\":_vm.checkFieldValue},on:{\"click\":_vm.onSubmit}},[_vm._v(\"\\n          登录\\n        \")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n  inserted: (el, binding, vnode) => {\n    vnode.event$ = () => {\n      const defaultText = el.innerText\n\n      binding.value().then(res => {\n        const timer = i => () => {\n          if (i < 1) {\n            el.classList.remove('is-disabled')\n            el.disabled = false\n            el.innerText = defaultText\n          } else {\n            el.classList.add('is-disabled')\n            el.disabled = true\n            el.innerText = `${i} s`\n          }\n        }\n        for (let i = 60; i > -1; i--) {\n          setTimeout(timer(i), 1000 * (60 - i))\n        }\n      })\n    }\n    el.addEventListener('click', vnode.event$)\n  },\n  unbind: (el, binding, vnode) => {\n    el.removeEventListener('click', vnode.event$)\n  }\n}\n","<template>\n  <el-container class=\"fix-container\">\n    <article class=\"fix-article\">\n      <LogoWrap size=\"large\" :logo=\"logo\">ElementUI Demo</LogoWrap>\n\n      <el-tabs class=\"fix-tabs\" v-model=\"tabsActive\" :before-leave=\"() => !this.isLogin\">\n        <el-tab-pane label=\"账户密码登录\" name=\"password\">\n\n          <el-form ref=\"password\" :model=\"form.password\">\n            <el-form-item prop=\"username\" :rules=\"{ required: true, message: '请输入用户名', trigger: 'change' }\">\n              <el-input\n                type=\"text\" placeholder=\"admin\"\n                v-model=\"form.password.username\"\n                clearable>\n                <i class=\"el-input__icon el-icon-icon-user\" slot=\"prefix\"></i>\n              </el-input>\n            </el-form-item>\n\n            <el-form-item prop=\"password\" :rules=\"{ required: true, message: '请输入密码', trigger: 'change' }\">\n              <el-input\n                type=\"password\" placeholder=\"admin\"\n                v-model=\"form.password.password\"\n                clearable>\n                <i class=\"el-input__icon el-icon-icon-lock\" slot=\"prefix\"></i>\n              </el-input>\n            </el-form-item>\n\n          </el-form>\n        </el-tab-pane>\n\n        <el-tab-pane label=\"手机号登录\" name=\"captcha\">\n          <el-form ref=\"captcha\" :model=\"form.captcha\">\n\n            <el-form-item prop=\"phone\" :rules=\"{ validator: validatePhone, message: '请输入手机号', trigger: 'change' }\">\n              <el-input\n                type=\"text\" placeholder=\"mobile number\"\n                v-model=\"form.captcha.phone\"\n                clearable>\n                <i class=\"el-input__icon el-icon-icon-mobile\" slot=\"prefix\"></i>\n              </el-input>\n            </el-form-item>\n\n            <el-form-item prop=\"captcha\" :rules=\"{ required: true, message: '请输入验证码', trigger: 'change' }\">\n              <el-row :gutter=\"10\">\n                <el-col :span=\"16\" :xs=\"14\" :sm=\"16\">\n                  <el-input\n                    type=\"text\" placeholder=\"captcha\"\n                    v-model=\"form.captcha.captcha\" clearable>\n                    <i class=\"el-input__icon el-icon-icon-mail\" slot=\"prefix\"></i>\n                  </el-input>\n                </el-col>\n                <el-col :span=\"8\" :xs=\"10\" :sm=\"8\">\n                  <el-button class=\"fix-button\" v-countDown=\"sendCaptcha\" plain>获取验证码</el-button>\n                </el-col>\n              </el-row>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n      </el-tabs>\n\n      <el-form>\n        <el-form-item class=\"fix-form-item\">\n          <el-checkbox v-model=\"autoLogin\">自动登录</el-checkbox>\n          <el-button type=\"text\">忘记密码</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button class=\"fix-button\" type=\"primary\"\n            :loading=\"isLogin\" @click=\"onSubmit\" :disabled=\"checkFieldValue\">\n            登录\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </article>\n  </el-container>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\nimport { namespace } from 'vuex-class'\n\nimport LogoWrap from '@/components/LogoWrap'\n\nimport countDown from '@directives/countDown'\n\nconst moduleUser = namespace('user')\n\nconst phoneRegExp = /^1(3|4|5|6|7|8|9)\\d{9}$/\n\n@Component({\n  components: { LogoWrap },\n  directives: { countDown }\n})\nexport default class Login extends Vue {\n  logo = require('@/assets/images/logo.png')\n  autoLogin = false\n  isLogin = false\n  tabsActive = 'password'\n  form = {\n    password: {\n      username: 'admin',\n      password: 'admin'\n    },\n    captcha: {\n      phone: '',\n      captcha: ''\n    }\n  }\n\n  @moduleUser.Action login\n  @moduleUser.Action getCaptcha\n\n  get checkFieldValue () {\n    let field = this.form[this.tabsActive]\n    let status = false\n    for (const key in field) {\n      if (field[key] === '') {\n        status = true\n        break\n      }\n    }\n    return status\n  }\n\n  validatePhone = (rule, value, callback) => {\n    if (phoneRegExp.test(value)) {\n      callback()\n    } else {\n      callback(new Error(rule.message))\n    }\n  }\n\n  onSubmit () {\n    this.$refs[this.tabsActive].validate(valid => {\n      if (!valid) return false\n      this.isLogin = true\n\n      this.login({ ...this.form[this.tabsActive], autoLogin: this.autoLogin })\n        .then(res => {\n          this.$message.success(res.message)\n          setTimeout(() => this.$router.push({ path: '/' }), 500)\n        })\n        .catch(res => this.$message.warning(res.message))\n        .finally(() => { this.isLogin = false })\n    })\n  }\n\n  sendCaptcha () {\n    // element 中验证方法并不能返回验证结果\n    // 所以此处仅作为样式展示\n    this.$refs[this.tabsActive].validateField('phone')\n\n    return new Promise((resolve, reject) => {\n      if (phoneRegExp.test(this.form.captcha.phone)) {\n        this.getCaptcha().then(res => {\n          this.$message({\n            showClose: true,\n            message: '验证码已发送',\n            type: 'success'\n          })\n        })\n        resolve()\n      }\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@nn-yy/css-flex/flex';\n\n.fix-container {\n  @include flex(center);\n  height: 100%;\n}\n\n.fix-article {\n  width: 360px;\n  padding: 100px 26px 0 26px;\n}\n\n.fix-form-item {\n  &::before {\n    all: initial;\n  }\n\n  /deep/ {\n    .el-form-item__content {\n      @include flex(between);\n      font-size: 400;\n\n      &::before,\n      &::after {\n        all: initial;\n      }\n    }\n  }\n}\n\n.fix-tabs {\n  /deep/ {\n    .el-tabs__header {\n      padding-bottom: 20px;\n    }\n    .el-tabs__nav-wrap {\n      @include flex(center, middle);\n    }\n    .el-tabs__item {\n      font-size: 16px;\n    }\n  }\n}\n\n.fix-button {\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3eda1416&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3eda1416&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3eda1416\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3eda1416&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3eda1416&lang=scss&scoped=true&\""],"sourceRoot":""}